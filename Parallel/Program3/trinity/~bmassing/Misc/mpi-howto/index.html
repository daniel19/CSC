<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Using MPI on the CS Linux Machines</TITLE>
<META NAME="description" CONTENT="Using MPI on the CS Linux Machines">
<META NAME="keywords" CONTENT="mpi-howto">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mpi-howto.css">

</HEAD>

<BODY >

<P>

<P>
<H1>Using MPI on the CS Linux Machines</H1>

<P>
You should be able to run MPI programs on any of our Linux machines.
(Note that to use a machine as one of the MPI ``hosts''
it must be running Linux.  You can check availability with the
command <TT>ruptime</TT>.)

<P>

<H2><A NAME="SECTION00001000000000000000">
Setting up your account</A>
</H2>

<P>

<H3><A NAME="SECTION00001100000000000000">
Enabling remote login without prompts</A>
</H3>

<P>
In order for MPI to start processes on other machines, 
your account must be set up so that MPI can remotely log into
the other machines without prompting for a password.
See <A NAME="tex2html2"
  HREF="../../Misc/ssh-howto/index.html">my notes on passwordless login</A>
for notes on how to do this.

<P>

<H3><A NAME="SECTION00001200000000000000">
Other setup considerations</A>
</H3>

<P>
If your account is set up according to our default scheme,
the commands needed to compile and execute
MPI programs will not be in the search path.
As of the last update to this page, this is deliberate:
Two versions of MPI are installed,
one for each of the two versions of the GNU compilers installed
(more about that in
<A NAME="tex2html3"
  HREF="../../Misc/gcc-howto/index.html">my notes on the GNU compilers</A>).

<P>
To get access to the version of MPI that uses the default (4.4.7)
version of the compilers, use the command
<P>
<BLOCKQUOTE><TT>module load openmpi-1.5.4</TT>
</BLOCKQUOTE>
<P>
<P>
To get access to the version of MPI that uses the more-recent (4.8.1)
version of the compilers, use the command
<P>
<BLOCKQUOTE><TT>module load openmpi-1.6.4</TT>
</BLOCKQUOTE>
<P>
<P>
You should probably choose one of these and put it in your <TT>.bashrc</TT>
file, as discussed in the notes on <TT>gcc</TT>;
this is the simplest way to be sure you can actually run MPI programs
on more than one machine.  
<P>

<H2><A NAME="SECTION00002000000000000000">
Compiling MPI programs</A>
</H2>

<P>
Use the command <TT>mpicc</TT> to compile C programs using MPI functions.
Simple usage:  
<P>
<BLOCKQUOTE><TT>mpicc -o foo foo.c</TT>
</BLOCKQUOTE>
<P>
Refer to the man page for other options. 

<P>
To compile C++ programs using MPI functions, use 
<TT>mpiCC</TT>, <TT>mpic++</TT>, or <TT>mpicxx</TT>.
(I'm not sure how these commands differ, if at all.)

<P>
To compile Fortran programs using MPI functions, use
<TT>mpif77</TT> or <TT>mpif90</TT>.

<P>

<H2><A NAME="SECTION00003000000000000000">
Running MPI programs</A>
</H2>

<P>
Use the command <TT>mpirun</TT> to run an MPI program.
Typical usage:
<P>
<BLOCKQUOTE><TT>mpirun -np 10 -host host1,host2 foobar</TT>
</BLOCKQUOTE>
<P>
<BLOCKQUOTE><TT>mpirun -np 10 -hostfile list-of-hosts foobar</TT>
</BLOCKQUOTE>
<P>
Both commands start 10 processes, each running executable <TT>foobar</TT>.
The first command starts them on machines
<TT>host1</TT> and <TT>host2</TT>; 
the second command reads machine names from the file
<TT>list-of-hosts</TT>.
Refer to the man page for other options.

<P>

<H2><A NAME="SECTION00004000000000000000">
Online documentation</A>
</H2>

<P>
Use the command <TT>man</TT> to display UNIX-style <TT>man</TT> pages
for MPI-related commands and routines.
Typical usage:

<P>
<P>
<BLOCKQUOTE><TT>man MPI_Send</TT>
</BLOCKQUOTE>
<P>
<P>

<H2><A NAME="SECTION00005000000000000000">
Useful links</A>
</H2>

<P>

<UL>
<LI><A NAME="tex2html4"
  HREF="http://www-unix.mcs.anl.gov/mpi">Argonne National Lab's MPI Web site</A>,
	with links to the MPI standard, a FAQ, tutorials,
	information about implementations, etc., etc.

<P>
</LI>
<LI><A NAME="tex2html5"
  HREF="http://www.mpi-forum.org">The MPI Forum's Web site</A>,
	with links to the full MPI standard.

<P>
</LI>
<LI><A NAME="tex2html6"
  HREF="http://www.open-mpi.org/">Home page for OpenMPI</A>, with specifics for this
	implementation.

<P>
</LI>
</UL>

<P>
<BR> <HR>
<ADDRESS>
<I>Berna Massingill <BR>
2013-09-25</I>
</ADDRESS>
</BODY>
</HTML>
